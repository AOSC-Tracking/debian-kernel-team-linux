From: Thomas Gleixner <tglx@linutronix.de>
Date: Sun, 17 Jul 2011 21:41:35 +0200
Subject: [PATCH 194/354] debugobjects: Make RT aware
Origin: https://git.kernel.org/cgit/linux/kernel/git/rt/linux-stable-rt.git/commit?id=1280891bf0f323478d3e8c38ff739907e4c8b32f

Avoid filling the pool / allocating memory with irqs off().

Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
---
 lib/debugobjects.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/debugobjects.c b/lib/debugobjects.c
index 62d095fd0c52..08c372c65d10 100644
--- a/lib/debugobjects.c
+++ b/lib/debugobjects.c
@@ -475,7 +475,7 @@ static void debug_objects_fill_pool(void)
 	 * On RT enabled kernels the pool refill must happen in preemptible
 	 * context:
 	 */
-	if (!IS_ENABLED(CONFIG_PREEMPT_RT) || preemptible())
+	if (!IS_ENABLED(CONFIG_PREEMPT_RT_FULL) || preemptible())
 		fill_pool();
 }
 
