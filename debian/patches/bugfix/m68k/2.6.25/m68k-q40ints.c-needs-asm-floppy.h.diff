
arch/m68k/q40/q40ints.c: In function 'q40_irq_handler':
arch/m68k/q40/q40ints.c:214: error: implicit declaration of function 'floppy_hardint'

FIXME q40_irq_handler() calls floppy_hardint():

arch/m68k/q40/q40ints.c:215: error: too few arguments to function 'floppy_hardint'

---
 arch/m68k/Kconfig       |    2 +-
 arch/m68k/q40/q40ints.c |    1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

--- a/arch/m68k/Kconfig
+++ b/arch/m68k/Kconfig
@@ -44,7 +44,7 @@ config GENERIC_IOMAP
 
 config ARCH_MAY_HAVE_PC_FDC
 	bool
-	depends on Q40 || (BROKEN && SUN3X)
+	depends on BROKEN && (Q40 || SUN3X)
 	default y
 
 config NO_IOPORT
--- a/arch/m68k/q40/q40ints.c
+++ b/arch/m68k/q40/q40ints.c
@@ -16,6 +16,7 @@
 #include <linux/errno.h>
 #include <linux/interrupt.h>
 
+//#include <asm/floppy.h>
 #include <asm/ptrace.h>
 #include <asm/system.h>
 #include <asm/irq.h>
