This is a combination of:
http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff_plain;h=1b364bf438cf337a3818aee77d68c0713f3e1fc4
http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff_plain;h=ea6bff368548d79529421a9dc0710fc5330eb504

module: workaround duplicate section names

--- a/kernel/module.c	2009-09-24 17:18:51.000000000 +0000
+++ b/kernel/module.c	2009-09-24 17:19:42.000000000 +0000
@@ -1255,6 +1255,10 @@
 	struct module_notes_attrs *notes_attrs;
 	struct bin_attribute *nattr;
 
+	/* failed to create section attributes, so can't create notes */
+	if (!mod->sect_attrs)
+		return;
+
 	/* Count notes sections and allocate structures.  */
 	notes = 0;
 	for (i = 0; i < nsect; i++)

