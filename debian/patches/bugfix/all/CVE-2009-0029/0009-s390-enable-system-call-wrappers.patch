From ed6bb6194350dc6ae97a65dbf2d621a3dbe6bbe9 Mon Sep 17 00:00:00 2001
From: Heiko Carstens <heiko.carstens@de.ibm.com>
Date: Wed, 14 Jan 2009 14:14:01 +0100
Subject: [PATCH 09/44] [CVE-2009-0029] s390: enable system call wrappers

From: Heiko Carstens <heiko.carstens@de.ibm.com>

commit ed6bb6194350dc6ae97a65dbf2d621a3dbe6bbe9 upstream.

Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

Backported to Debian's 2.6.18 by dann frazier <dannf@debian.org>

diff -urpN linux-source-2.6.18.orig/arch/s390/Kconfig linux-source-2.6.18/arch/s390/Kconfig
--- linux-source-2.6.18.orig/arch/s390/Kconfig	2008-12-25 14:04:12.000000000 -0700
+++ linux-source-2.6.18/arch/s390/Kconfig	2009-01-25 20:20:42.000000000 -0700
@@ -38,6 +38,7 @@ mainmenu "Linux Kernel Configuration"
 config S390
 	bool
 	default y
+	select HAVE_SYSCALL_WRAPPERS
 
 source "init/Kconfig"
 
diff -urpN linux-source-2.6.18.orig/arch/s390/Kconfig.debug linux-source-2.6.18/arch/s390/Kconfig.debug
--- linux-source-2.6.18.orig/arch/s390/Kconfig.debug	2006-09-19 21:42:06.000000000 -0600
+++ linux-source-2.6.18/arch/s390/Kconfig.debug	1969-12-31 17:00:00.000000000 -0700
@@ -1,9 +0,0 @@
-menu "Kernel hacking"
-
-config TRACE_IRQFLAGS_SUPPORT
-	bool
-	default y
-
-source "lib/Kconfig.debug"
-
-endmenu
