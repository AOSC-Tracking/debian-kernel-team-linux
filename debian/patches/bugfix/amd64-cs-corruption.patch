diff -urpN linux-source-2.6.18.orig/arch/x86_64/kernel/entry.S linux-source-2.6.18/arch/x86_64/kernel/entry.S
--- linux-source-2.6.18.orig/arch/x86_64/kernel/entry.S	2008-04-23 21:53:06.000000000 -0600
+++ linux-source-2.6.18/arch/x86_64/kernel/entry.S	2008-05-08 17:19:58.000000000 -0600
@@ -776,7 +776,7 @@ paranoid_swapgs\trace:
 	swapgs
 paranoid_restore\trace:
 	RESTORE_ALL 8
-	iretq
+	jmp iret_label
 paranoid_userspace\trace:
 	GET_THREAD_INFO(%rcx)
 	movl threadinfo_flags(%rcx),%ebx
